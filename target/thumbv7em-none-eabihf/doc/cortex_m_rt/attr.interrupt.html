<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Attribute to declare an interrupt (AKA device-specific exception) handler"><title>interrupt in cortex_m_rt - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="cortex_m_rt" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.1 (4eb161250 2025-03-15)" data-channel="1.85.1" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc attr"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../cortex_m_rt/index.html">cortex_<wbr>m_<wbr>rt</a><span class="version">0.7.5</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">interrupt</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#syntax" title="Syntax">Syntax</a></li><li><a href="#usage" title="Usage">Usage</a></li><li><a href="#properties" title="Properties">Properties</a></li><li><a href="#examples" title="Examples">Examples</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate cortex_<wbr>m_<wbr>rt</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">cortex_m_rt</a></span><h1>Attribute Macro <span class="attr">interrupt</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><pre class="rust item-decl"><code>#[interrupt]</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Attribute to declare an interrupt (AKA device-specific exception) handler</p>
<p><strong>NOTE</strong>: This attribute is exposed by <code>cortex-m-rt</code> only when the <code>device</code> feature is enabled.
However, that export is not meant to be used directly – using it will result in a compilation
error. You should instead use the PAC (usually generated using <code>svd2rust</code>) re-export of
that attribute. You need to use the re-export to have the compiler check that the interrupt
exists on the target device.</p>
<h2 id="syntax"><a class="doc-anchor" href="#syntax">§</a>Syntax</h2>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>device;

<span class="comment">// the attribute comes from the PAC not from cortex-m-rt
</span><span class="kw">use </span>device::interrupt;

<span class="attr">#[interrupt]
</span><span class="kw">fn </span>USART1() {
    <span class="comment">// ..
</span>}</code></pre></div>
<p>where the name of the function must be one of the device interrupts.</p>
<h2 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h2>
<p><code>#[interrupt] fn Name(..</code> overrides the default handler for the interrupt with the given <code>Name</code>.
These handlers must have signature <code>[unsafe] fn() [-&gt; !]</code>. It’s possible to add state to these
handlers by declaring <code>static mut</code> variables at the beginning of the body of the function. These
variables will be safe to access from the function body.</p>
<p>If the interrupt handler has not been overridden it will be dispatched by the default exception
handler (<code>DefaultHandler</code>).</p>
<h2 id="properties"><a class="doc-anchor" href="#properties">§</a>Properties</h2>
<p>Interrupts handlers can only be called by the hardware. Other parts of the program can’t refer
to the interrupt handlers, much less invoke them as if they were functions.</p>
<p><code>static mut</code> variables declared within an interrupt handler are safe to access and can be used
to preserve state across invocations of the handler. The compiler can’t prove this is safe so
the attribute will help by making a transformation to the source code: for this reason a
variable like <code>static mut FOO: u32</code> will become <code>let FOO: &amp;mut u32;</code>.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<ul>
<li>Using state within an interrupt handler</li>
</ul>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>device;

<span class="kw">use </span>device::interrupt;

<span class="attr">#[interrupt]
</span><span class="kw">fn </span>TIM2() {
    <span class="kw">static </span><span class="kw-2">mut </span>COUNT: i32 = <span class="number">0</span>;

    <span class="comment">// `COUNT` is safe to access and has type `&amp;mut i32`
    </span><span class="kw-2">*</span>COUNT += <span class="number">1</span>;

    <span class="macro">println!</span>(<span class="string">"{}"</span>, COUNT);
}</code></pre></div>
</div></details></section></div></main></body></html>